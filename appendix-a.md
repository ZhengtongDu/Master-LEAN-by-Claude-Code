# 附录 A：术语与策略速查表

## 本附录概要

本附录分为三部分：**术语速查**收录 LEAN 4 核心术语的中英文对照与简要说明；**符号输入速查**整理 LEAN 4 中常用特殊符号的输入方式；**策略速查**按功能分类整理常用策略，方便读者在编写证明时快速查阅。

---

## 一、术语速查

### 1.1 交互命令

| 英文 | 中文 | 说明 |
|------|------|------|
| `#eval` | 求值命令 | 计算表达式的值并输出结果 |
| `#check` | 类型检查命令 | 显示表达式的类型 |
| `#print` | 打印命令 | 打印定义、公理或归纳类型的详细信息 |
| Infoview | 信息视图 | VS Code 侧边栏，实时显示目标与假设 |

---

### 1.2 定义与声明关键字

| 英文 | 中文 | 说明 |
|------|------|------|
| `def` | 定义 | 定义函数或值 |
| `theorem` | 定理 | 定义一个命题的证明（与 `def` 语义相同，语义标记不同） |
| `example` | 示例 | 匿名定理，不绑定名称 |
| `variable` | 变量声明 | 声明后续定义中隐式使用的参数 |
| `let` | 局部绑定 | 在表达式内部引入局部定义 |
| `fun` / `λ` | Lambda 表达式 | 匿名函数 |
| `inductive` | 归纳类型 | 定义新的归纳数据类型 |
| `structure` | 结构体 | 定义单构造子的积类型（语法糖） |
| `class` | 类型类 | 带自动实例推断的结构体 |
| `instance` | 实例 | 为类型类提供具体实现 |
| `open` | 打开命名空间 | 使命名空间中的名称可直接使用 |
| `import` | 导入 | 导入其他模块 |

关键示例：

```lean
-- def vs theorem
def double (n : Nat) : Nat := n * 2
theorem double_zero : double 0 = 0 := rfl

-- fun / λ
#check fun x : Nat => x + 1
#check λ x : Nat => x + 1
```

---

### 1.3 类型系统

| 英文 | 中文 | 说明 |
|------|------|------|
| `Type` | 类型宇宙 | 数据类型所在的宇宙，`Nat : Type` |
| `Prop` | 命题宇宙 | 命题所在的宇宙，`True : Prop` |
| `Nat` | 自然数 | 归纳定义的自然数类型 |
| `Int` | 整数 | 整数类型 |
| `Bool` | 布尔值 | `true` / `false` |
| `String` | 字符串 | 字符串类型 |
| `List α` | 列表 | 参数化的列表类型 |
| Dependent Type | 依赖类型 | 返回类型依赖于参数值的类型 |
| Implicit Argument | 隐式参数 | 用 `{}` 声明，由编译器自动推断 |
| Universe | 宇宙 | 类型的类型层级：`Type 0 : Type 1 : Type 2 …` |

---

### 1.4 证明核心概念

| 英文 | 中文 | 说明 |
|------|------|------|
| Proof | 证明 | 命题类型的一个项（居民） |
| Goal | 目标 | 当前需要证明的命题 |
| Hypothesis | 假设 | 上下文中已知的命题或变量 |
| Term Mode | 项式证明 | 直接构造证明项 |
| Tactic Mode | 策略式证明 | 用 `by` 进入，通过策略逐步变换目标 |
| `by` | 策略块 | 从项模式切换到策略模式 |
| `sorry` | 占位符 | 跳过证明，标记为未完成 |
| Curry-Howard Isomorphism | Curry-Howard 同构 | 命题 ↔ 类型，证明 ↔ 项 |

关键示例：

```lean
-- Term Mode（项式证明）
theorem and_comm_term (h : P ∧ Q) : Q ∧ P :=
  ⟨h.2, h.1⟩

-- Tactic Mode（策略式证明）
theorem and_comm_tactic (h : P ∧ Q) : Q ∧ P := by
  constructor
  · exact h.2
  · exact h.1
```

---

### 1.5 逻辑连接词

| 英文 | 符号 | 中文 | LEAN 类型 |
|------|------|------|-----------|
| And | `∧` | 逻辑与 | `And P Q` / `P ∧ Q` |
| Or | `∨` | 逻辑或 | `Or P Q` / `P ∨ Q` |
| Not | `¬` | 逻辑非 | `Not P` = `P → False` |
| Iff | `↔` | 当且仅当 | `Iff P Q` / `P ↔ Q` |
| True | — | 真命题 | `True : Prop` |
| False | — | 假命题 | `False : Prop` |
| Implication | `→` | 蕴含 | 函数类型 `P → Q` |
| Universal | `∀` | 全称量词 | 依赖函数类型 `(x : α) → P x` |
| Existential | `∃` | 存在量词 | 依赖对类型 `Exists (fun x => P x)` |

---

### 1.6 构造子与消除子

| 英文 | 中文 | 说明 |
|------|------|------|
| Constructor | 构造子 | 创建归纳类型值的方式 |
| Eliminator | 消除子 / 递归子 | 从归纳类型中提取信息的方式 |
| `And.intro` / `⟨,⟩` | 与-构造 | 构造 `P ∧ Q` |
| `And.left` / `And.right` | 与-消除 | 从 `P ∧ Q` 提取 `P` 或 `Q` |
| `Or.inl` / `Or.inr` | 或-构造 | 构造 `P ∨ Q` 的左/右分支 |
| `Or.elim` | 或-消除 | 对 `P ∨ Q` 分类讨论 |
| `False.elim` | 爆炸原理 | 从 `False` 推出任意命题 |
| `rfl` | 自反性 | `a = a` 的证明 |
| `Exists.intro` / `⟨,⟩` | 存在-构造 | 提供见证值与证明 |

---

### 1.7 逻辑基础

| 英文 | 中文 | 说明 |
|------|------|------|
| Constructive Logic | 构造主义逻辑 | LEAN 默认逻辑，证明需给出构造 |
| Classical Logic | 经典逻辑 | 通过 `Classical.em` 引入排中律 |
| Law of Excluded Middle | 排中律 | `∀ P, P ∨ ¬P` |
| Principle of Explosion | 爆炸原理 | 从 `False` 可推出任意命题 |
| Proof Irrelevance | 证明无关性 | `Prop` 中同一命题的任意两个证明相等 |

---

## 二、符号输入速查

> **使用方法**：在 VS Code 中安装 lean4 扩展后，输入反斜杠缩写（如 `\and`）再按空格，即可自动转换为对应 Unicode 符号（`∧`）。

### 2.1 逻辑符号

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `∧` | 逻辑与 | `\and` | `P ∧ Q` |
| `∨` | 逻辑或 | `\or` | `P ∨ Q` |
| `¬` | 逻辑非 | `\not` / `\neg` | `¬P` 即 `P → False` |
| `↔` | 当且仅当 | `\iff` | `P ↔ Q` |
| `→` | 蕴含/函数箭头 | `\to` / `\r` | `P → Q` |
| `∀` | 全称量词 | `\forall` | `∀ x, P x` |
| `∃` | 存在量词 | `\exists` | `∃ x, P x` |
| `λ` | Lambda | `\lam` / `\la` | `λ x => x + 1`，等价于 `fun` |

---

### 2.2 括号与标点

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `⟨` | 尖括号（左） | `\<` / `\langle` | 匿名构造子 `⟨a, b⟩` |
| `⟩` | 尖括号（右） | `\>` / `\rangle` | 与 `⟨` 配对使用 |
| `·` | 中点 | `\cdot` / `\.` | 聚焦策略 `· exact h` |
| `⊢` | 推导符 | `\vdash` / `\|-` | Infoview 中 `⊢ P` 表示目标 |

---

### 2.3 比较与算术

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `≤` | 小于等于 | `\le` | `a ≤ b` |
| `≥` | 大于等于 | `\ge` | `a ≥ b` |
| `≠` | 不等于 | `\ne` | `a ≠ b` 即 `¬(a = b)` |
| `×` | 笛卡尔积 | `\times` | `α × β` |
| `∣` | 整除 | `\mid` | `m ∣ n` |
| `∘` | 函数复合 | `\circ` / `\comp` | `f ∘ g` |

---

### 2.4 希腊字母

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `α` | alpha | `\a` / `\alpha` | 常用作类型变量 |
| `β` | beta | `\b` / `\beta` | 常用作类型变量 |
| `γ` | gamma | `\g` / `\gamma` | — |
| `δ` | delta | `\d` / `\delta` | — |
| `ε` | epsilon | `\e` / `\epsilon` | — |
| `Π` | Pi | `\Pi` | 依赖函数类型 |

---

### 2.5 数集符号

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `ℕ` | 自然数 | `\N` / `\nat` | 等价于 `Nat` |
| `ℤ` | 整数 | `\Z` / `\int` | 等价于 `Int` |
| `ℚ` | 有理数 | `\Q` | 需 Mathlib |
| `ℝ` | 实数 | `\R` | 需 Mathlib |
| `ℂ` | 复数 | `\C` | 需 Mathlib |

---

### 2.6 箭头

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `→` | 右箭头 | `\to` / `\r` | 函数类型、蕴含 |
| `←` | 左箭头 | `\l` / `\<-` | `rw [← h]` 反向重写 |
| `↦` | 映射箭头 | `\mapsto` | `fun x ↦ x + 1`（Mathlib 风格） |
| `▸` | 替换三角 | `\t` | 用等式替换目标中的项 |

---

### 2.7 集合论

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `∈` | 属于 | `\in` / `\mem` | `x ∈ S` |
| `∉` | 不属于 | `\notin` | `x ∉ S` |
| `⊂` | 真子集 | `\sub` | `A ⊂ B` |
| `⊆` | 子集 | `\sube` / `\subseteq` | `A ⊆ B` |
| `∪` | 并集 | `\cup` / `\union` | `A ∪ B` |
| `∩` | 交集 | `\cap` / `\inter` | `A ∩ B` |
| `∅` | 空集 | `\empty` | — |

---

### 2.8 下标与上标

| 符号 | 名称 | 输入方式 | 说明 |
|------|------|----------|------|
| `₀₁₂…` | 下标数字 | `\_0` `\_1` `\_2` … | 如 `h₁`、`x₀` |
| `ₙₘₖ…` | 下标字母 | `\_n` `\_m` `\_k` … | 如 `aₙ` |
| `⁰¹²…` | 上标数字 | `\^0` `\^1` `\^2` … | 较少使用 |

> **提示**：在 VS Code 中输入 `\` 后会弹出自动补全列表，支持模糊搜索。如果忘记了某个符号的缩写，只需输入 `\` 然后键入关键词即可找到。

---

## 三、策略速查

### 3.1 基础策略

| 策略 | 说明 | 示例 |
|------|------|------|
| `intro h` | 引入假设或参数 | 将 `∀ x, P x` 变为 `P x` |
| `exact e` | 直接提供证明项 | `exact h` |
| `apply f` | 应用函数或引理 | `apply Nat.add_comm` |
| `assumption` | 自动从假设中寻找 | — |
| `trivial` | 证明平凡命题 | — |

---

### 3.2 逻辑策略

| 策略 | 说明 | 示例 |
|------|------|------|
| `constructor` | 构造合取或存在 | 将 `P ∧ Q` 分为两个目标 |
| `left` / `right` | 选择析取分支 | `left` 证明 `P ∨ Q` 的左边 |
| `cases h` | 对假设进行情况分析 | — |
| `rcases h with ⟨a, b⟩` | 递归模式匹配 | — |
| `obtain ⟨x, hx⟩ := h` | 从存在量词提取 | — |
| `use x` | 提供存在量词的见证 | — |
| `exfalso` | 转为证明 `False` | — |
| `by_contra h` | 反证法 | — |

---

### 3.3 重写与化简

| 策略 | 说明 | 示例 |
|------|------|------|
| `rw [h]` | 使用 h 重写目标 | — |
| `rw [← h]` | 反向重写 | — |
| `simp` | 自动化简 | — |
| `simp [h]` | 使用额外引理化简 | — |
| `simp only [h]` | 仅使用指定引理 | — |
| `norm_num` | 数值计算 | `norm_num` 证明 `2 + 2 = 4` |
| `ring` | 环论自动证明 | `ring` 证明 `(a+b)^2 = a^2+2*a*b+b^2` |
| `field_simp` | 分式化简 | — |

---

### 3.4 归纳与递归

| 策略 | 说明 | 示例 |
|------|------|------|
| `induction n` | 对 n 进行归纳 | — |
| `induction n with ...` | 指定归纳变量名 | — |
| `cases n` | 情况分析（不带归纳假设） | — |

---

### 3.5 自动化策略

| 策略 | 说明 | 示例 |
|------|------|------|
| `decide` | 可判定命题自动证明 | — |
| `omega` | 线性算术自动证明 | — |
| `aesop` | 高级自动化搜索 | — |
| `linarith` | 线性算术（需 Mathlib） | — |
| `nlinarith` | 非线性算术（需 Mathlib） | — |

---

### 3.6 搜索策略（需 Mathlib）

| 策略 | 说明 |
|------|------|
| `exact?` | 搜索精确匹配的引理 |
| `apply?` | 搜索可应用的引理 |
| `rw?` | 搜索可重写的引理 |

---

### 3.7 组合策略

| 语法 | 说明 |
|------|------|
| `t1 <;> t2` | 对 t1 产生的所有目标应用 t2 |
| `· t` | 聚焦当前目标 |
| `repeat t` | 重复应用 t 直到失败 |
| `first \| t1 \| t2` | 尝试 t1，失败则尝试 t2 |
| `try t` | 尝试 t，失败也继续 |
| `all_goals t` | 对所有目标应用 t |

---

### 3.8 辅助策略

| 策略 | 说明 |
|------|------|
| `have h : P := ...` | 引入辅助命题 |
| `let x := ...` | 引入辅助定义 |
| `show P` | 明确当前目标 |
| `suffices h : P` | 转为证明充分条件 |
| `calc` | 计算式证明 |
| `conv => ...` | 精确控制重写位置 |

---

## 延伸阅读

- [LEAN 4 官方策略文档](https://leanprover.github.io/lean4/doc/tactics.html)
- [Mathlib 策略文档](https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic.html)