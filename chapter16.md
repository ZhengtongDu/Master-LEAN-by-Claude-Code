# 第十六章：程序验证

## 本章概要

本章介绍如何使用 LEAN 进行程序验证。LEAN 不仅是定理证明器，也是一门编程语言，可以编写程序并在同一系统中证明程序的正确性。

---

## 16.1 规范与实现

### 内容点
- 规范（Specification）的表达
- 实现与规范的分离
- 正确性定理的陈述
- 部分正确性与完全正确性
- 验证方法论

### Toy Case 简介
**最大值函数**：定义 `max` 函数并证明其满足规范。

---

## 16.2 前置条件与后置条件

### 内容点
- 前置条件的表达
- 后置条件的表达
- Hoare 三元组的编码
- 依赖类型编码约束
- 细化类型模式

### Toy Case 简介
**安全数组访问**：实现带边界检查证明的数组访问函数。

---

## 16.3 循环不变量

### 内容点
- 循环不变量的概念
- 在 LEAN 中表达循环
- 不变量的建立与维护
- 从不变量推导后置条件
- 递归与循环的等价

### Toy Case 简介
**求和函数验证**：验证一个计算 1+2+...+n 的循环程序。

---

## 16.4 终止性证明

### 内容点
- 为什么需要终止性
- 结构递归的自动终止
- 良基递归
- 递减度量
- `termination_by` 与 `decreasing_by`

### Toy Case 简介
**欧几里得算法**：实现 GCD 并证明其终止性。

---

## 16.5 实战：验证排序算法

### 内容点
- 排序的规范：有序性与置换
- 选择排序的实现
- 正确性证明
- 归并排序的验证
- 性能考量

### Toy Case 简介
**插入排序验证**：实现插入排序并完整证明其正确性。

---

## 本章小结

（待编写）

## 练习题

（待编写）

## 延伸阅读

（待编写）
